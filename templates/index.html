<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>dgist info</title>

  <!-- Bootstrap core CSS -->

  <!--커스텀 css파일-->
  <link href="css/main.css" rel="stylesheet">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">


  </head>





<body>
<h1 class="display-4" align="center">dgist info</h1>

<div class="container p-4 pt-2 my-3 ">
  <div class="row">
    <div class="col ">
      <div id="wd00" align="center">loading</div>
      <img id=wd_img0 width="30" height=auto style="display: block; margin: 0 auto;"/>
      <div id="wd0" align="center">loading</div>

    </div>
    <div class="col ">
      <div id="wd11" align="center">loading</div>
      <img id=wd_img1 width="30" height=auto style="display: block; margin: 0 auto;"/>
      <div id="wd1" align="center">loading</div>
    </div>
    <div class="col">
      <div id="wd22" align="center">loading</div>
      <img id=wd_img2 width="30" height=auto style="display: block; margin: 0 auto;"/>
      <div id="wd2" align="center">loading</div>
    </div>
    <div class="col">
      <div id="wd33" align="center">loading</div>
      <img id=wd_img3 width="30" height=auto style="display: block; margin: 0 auto;"/>
      <div id="wd3" align="center">loading</div>
    </div>
    <div class="col">
      <div id="wd44" align="center">loading</div>
      <img id=wd_img4 width="30" height=auto style="display: block; margin: 0 auto;"/>
      <div id="wd4" align="center">loading</div>
    </div>
  </div>
</div>




  <script>

    function weather_lod() {
      var xhttp = new XMLHttpRequest();

      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          var weather_data=JSON.parse(this.responseText)

        for (i=0;i<5;i++ ){
          document.getElementById("wd"+i).innerHTML ="🌡 "+weather_data[i][0]["T3H"]+"°C<br>"+"🌧 "+weather_data[i][0]["POP"]+"%<br>"+
          "🌢 : "+weather_data[i][0]["REH"]
      }

        for (i=0;i<5;i++ ){
          document.getElementById("wd"+i+i).innerHTML =weather_data[i][0]["time"].slice(0,2)+"시 <br>"
      }

        for (i=0;i<5;i++ ){
          if (weather_data[i][0]["PTY"]==0){
            if (weather_data[i][0]["SKY"]==1){
              document.getElementById("wd_img"+i).src="https://raw.githubusercontent.com/chanwoo99/info_website/0b3e4bf07678b8f8079a3cf4eb9ffd5fedeaf619/templates/icon/sky_1.svg"
            }
            else if (weather_data[i][0]["SKY"]==3){
              document.getElementById("wd_img"+i).src="https://raw.githubusercontent.com/chanwoo99/info_website/0b3e4bf07678b8f8079a3cf4eb9ffd5fedeaf619/templates/icon/sky_3.svg"
            }
            else document.getElementById("wd_img"+i).src="https://raw.githubusercontent.com/chanwoo99/info_website/0b3e4bf07678b8f8079a3cf4eb9ffd5fedeaf619/templates/icon/sky_4.svg"

          }

          else{
            if (weather_data[i][0]["PTY"]==1){
              document.getElementById("wd_img"+i).src="https://raw.githubusercontent.com/chanwoo99/info_website/0b3e4bf07678b8f8079a3cf4eb9ffd5fedeaf619/templates/icon/rain_1.svg"
            }
            else if (weather_data[i][0]["PTY"]==2 || weather_data[i][0]["PYT"]==3){
              document.getElementById("wd_img"+i).src="https://raw.githubusercontent.com/chanwoo99/info_website/0b3e4bf07678b8f8079a3cf4eb9ffd5fedeaf619/templates/icon/rain_2_3.svg"
            }
            else if (weather_data[i][0]["PTY"]==4){
              document.getElementById("wd_img"+i).src="https://raw.githubusercontent.com/chanwoo99/info_website/0b3e4bf07678b8f8079a3cf4eb9ffd5fedeaf619/templates/icon/rain_4.svg"
            }
            else if (weather_data[i][0]["PTY"]==5){
              document.getElementById("wd_img"+i).src="https://raw.githubusercontent.com/chanwoo99/info_website/0b3e4bf07678b8f8079a3cf4eb9ffd5fedeaf619/templates/icon/rain_5.svg"
            }
            else document.getElementById("wd_img"+i).src="https://raw.githubusercontent.com/chanwoo99/info_website/0b3e4bf07678b8f8079a3cf4eb9ffd5fedeaf619/templates/icon/rain_6_7.svg"

          }

      }


        } else if (this.status == 403){
          alert("forbiden")
          } else if (this.status == 403){
          alert("404 not found")
          }
      };
      xhttp.open("GET", "http://13.209.49.120:8080/weather", true);
    //  xhttp.open("GET", "http://localhost:8080/weather", true);   //테스트
      xhttp.send();
    }

    weather_lod()
  </script>



</body>
